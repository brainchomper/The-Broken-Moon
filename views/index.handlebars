<div class="row mainGame">

	<div class="col"></div>

	<div class="col mainpage-col">
		<img src="./images/broken-moon.png" class="img-fluid" alt="Broken Moon"> {{!-- login Button --}}
		<div class="g-signin2" data-onsuccess="onSignIn"></div>

		{{!-- logout btn --}}
		<button type="button" class="btn btn-danger btn-rounded" id="logout" onclick="signOut();">Sign Out</button>
	</div>

	<div class="col"></div>

</div>

{{!-- JS --}}
<script>
	//google auth code 
	function onSignIn(googleUser) {
		var profile = googleUser.getBasicProfile();
		console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.
		console.log('Name: ' + profile.getName());
		console.log('Image URL: ' + profile.getImageUrl());
		console.log('Email: ' + profile.getEmail()); // This is null if the 'email' scope is not present.
		// The ID token you need to pass to your backend:
		var id_token = googleUser.getAuthResponse().id_token;
		console.log("ID Token: " + id_token);

		// Are they in the DB?
		// Yes: forward to menu
		// No: dbCall();

		dbCall();
		function dbCall() {
			$.ajax({
				url: "/api/user ",
				type: "POST",

				data: {
					id_token: id_token,
					user_id: profile.getId(),
					user_name: profile.getName(),
					user_email: profile.getEmail(),
					user_photo: profile.getImageUrl()
				},

			}).then(function (data) {
				location.href = "/menu";
			});
		}
		module.exports(profile);
	}// end gogole auth
	//logout
	function signOut() {
		var logout = function () {
			document.location.href = "https://www.google.com/accounts/Logout?continue=https://appengine.google.com/_ah/logout?continue=https://the-broken-moon-herokuapp.com"
		}
	}//end logout
</script>